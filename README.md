# Running title: OMERO2CNB  
  NB-Index-OMERO

## Introduction
OMERO use PostgreSQL database to store annotation information of images.
Omero2cnb extracts and monitors the key-value map stored in annotation_mapvalue table in PostgreSQL database.
If any key is "regions",  and value format is `genome:chromosome:start-end;...` , such as `hg38:chr1:1-20000;hg38:chr1:30000-40000`, omero2cnb will
parse this values into genome coordinates and put them into a memory [bin indexing](http://genomewiki.ucsc.edu/index.php/Bin_indexing_system) structure and provides a web data service http://127.0.0.1:3721 of query genome choordinates for Nucleome Browser.

Omero2cnb monitors the change of annotation_mapvalue table every 90 seconds.

If you want use this data service other than local server, please use [reverse proxy](https://en.wikipedia.org/wiki/Reverse_proxy) software such [nginx](https://www.nginx.com/) or [traefik](https://github.com/containous/traefik).

## Install
```
go get github.com/nucleome/omero2cnb
```

## Usage
```
omero2cnb [db_host] [dbname] [db_user] [db_passwd] [omero_web_server]
```

## Docker
- [omero-cnb in Docker Hub](https://hub.docker.com/repository/docker/nimezhu/cnb-index-omero)
- [Dockerfile in GitHub](https://github.com/nimezhu/cnb-index-omero-docker)
This dockerfile need a binary executable file. Generated by following command.
```
git clone https://github.com/nucleome/omero2cnb
cd omero2cnb
env CGO_ENABLED=0 GOARCH=amd64 GOOS=linux go build
```

## Docker Compose with OMERO
User can start a docker compose along with OMERO and OMERO.web.
- [Docker compose file](https://gist.github.com/nimezhu/920130590d9a288be61d35971e11857f)

